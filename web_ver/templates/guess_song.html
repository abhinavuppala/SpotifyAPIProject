{% extends "base.html" %}

{% block html_title %}
    <title>Guess the {{artist_name}} Song!</title>
{% endblock %}

{% block content %}
<style>

#keyboard-cont {
  margin: 1rem 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#keyboard-cont div {
  display: flex;
}

.first-row {
    margin-top: 0.5rem;
}

.second-row {
  margin: 0.5rem 0;
}

.keyboard-button {
  font-size: 1rem;
  font-weight: 700;
  padding: 0.5rem;
  margin: 0 2px;
  cursor: pointer;
  text-transform: uppercase;
  background-color: lightgray;
}

</style>

<div class="row"> 
    <div class="col-md-8">
        <h1 id="end_message"></h1>
        <h1 id="song_name"></h1>
        <h1 id="song_name_hidden" style="letter-spacing: 0.08em;"></h1>
    </div>
    <div class="col-md-4">
        <img id="hangman_img" width="150vw" height="100vh" src="{{url_for('static', filename='hangman_imgs/h0.jpg')}}">
    </div>
</div>

<div class="row">
    <h2 class="col-md-2" id="strikes"></h2>
    <h3 class="col-md-6" id="guesses"></h3>
</div>

<div id="scoreDiv"></div>

<div id="albumCoverDiv"></div>

<div id="guessElementsDiv">
    <label> Your guess: </label>
    <input type="text" id="guessInput">
    <button onclick="getGuessInput(null)" id="guessButton"> Enter </button>
</div>

<div id="keyboard-cont">
    <div class="numbers-row">
        <button class="keyboard-button">1</button>
        <button class="keyboard-button">2</button>
        <button class="keyboard-button">3</button>
        <button class="keyboard-button">4</button>
        <button class="keyboard-button">5</button>
        <button class="keyboard-button">6</button>
        <button class="keyboard-button">7</button>
        <button class="keyboard-button">8</button>
        <button class="keyboard-button">9</button>
        <button class="keyboard-button">0</button>
    </div>
    <div class="first-row">
        <button class="keyboard-button">q</button>
        <button class="keyboard-button">w</button>
        <button class="keyboard-button">e</button>
        <button class="keyboard-button">r</button>
        <button class="keyboard-button">t</button>
        <button class="keyboard-button">y</button>
        <button class="keyboard-button">u</button>
        <button class="keyboard-button">i</button>
        <button class="keyboard-button">o</button>
        <button class="keyboard-button">p</button>
    </div>
    <div class="second-row">
        <button class="keyboard-button">a</button>
        <button class="keyboard-button">s</button>
        <button class="keyboard-button">d</button>
        <button class="keyboard-button">f</button>
        <button class="keyboard-button">g</button>
        <button class="keyboard-button">h</button>
        <button class="keyboard-button">j</button>
        <button class="keyboard-button">k</button>
        <button class="keyboard-button">l</button>
    </div>
    <div class="third-row">
        <button class="keyboard-button">Del</button>
        <button class="keyboard-button">z</button>
        <button class="keyboard-button">x</button>
        <button class="keyboard-button">c</button>
        <button class="keyboard-button">v</button>
        <button class="keyboard-button">b</button>
        <button class="keyboard-button">n</button>
        <button class="keyboard-button">m</button>
        <button class="keyboard-button">Enter</button>
    </div>
</div>

<div id="buttonsDiv"></div>

<script type="text/javascript">
    // lets enter key trigger submitting input
    var input_box = document.getElementById("guessInput");
    input_box.addEventListener("keypress", function(event)
    {
        if (event.key === "Enter")
        {
            event.preventDefault();
            document.getElementById("guessButton").click();
        }
    });

    // get variables from flask request
    var artist_tracks_json = JSON.parse('{{ artist_tracks_json|tojson }}');
    const max_strikes = JSON.parse('{{ max_strikes }}');

    var hangman_paths = []; // file paths for each hangman images, at each index
    const images_for_each_strike = [[9], [0, 9], [0, 5, 9], [0, 5, 7, 9], [0, 4, 5, 7, 9], // 0-4 strikes
                                    [0, 5, 6, 7, 8, 9], [0, 4, 5, 6, 7, 8, 9], [0, 1, 4, 5, 6, 7, 8, 9], // 5-7 strikes
                                    [0, 1, 3, 4, 5, 6, 7, 8, 9], [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]] // 8-9 strikes
    for (let i = 0; i <= 9; i++)
    {
        hangman_paths.push("{{ url_for('static', filename='hangman_imgs/h0.jpg') }}".replace("0", i));
    }
    console.log(hangman_paths);
</script>
<script type="text/javascript" src="{{url_for('static', filename='guess_song.js')}}"> </script>
{% endblock %}